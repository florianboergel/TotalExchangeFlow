---

title: TEF core framework


keywords: fastai
sidebar: home_sidebar

summary: "contains TEF framework"
description: "contains TEF framework"
nb_path: "00_tef_core.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: 00_tef_core.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="TEF_object" class="doc_header"><code>class</code> <code>TEF_object</code><a href="https://github.com/florianboergel/pyTEF/tree/master/pyTEF/tef_core.py#L12" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>TEF_object</code>(<strong><code>filename</code></strong>=<em><code>None</code></em>, <strong><code>ds</code></strong>=<em><code>None</code></em>, <strong>**<code>kwargs</code></strong>)</p>
</blockquote>
<p>Total Exchange Flow (TEF) Object used for calculating TEF properties</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The user can either provide the path to a netCDF-dataset using <code>filename</code>, which will then be loaded as a xarray dataset. If a pre-loaded xarray dataset is already present, the user can simply assign this to the <a href="/pyTEF/tef_core.html#TEF_object"><code>TEF_object</code></a> by using <code>ds</code>.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="TEF_object.timesteps" class="doc_header"><code>TEF_object.timesteps</code><a href="" class="source_link" style="float:right">[source]</a></h4>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Returns the number of timesteps of the given dataset.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="TEF_object.read" class="doc_header"><code>TEF_object.read</code><a href="https://github.com/florianboergel/pyTEF/tree/master/pyTEF/tef_core.py#L78" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>TEF_object.read</code>(<strong><code>filename</code></strong>, <strong>**<code>kwargs</code></strong>)</p>
</blockquote>
<p>Reads xarray dataset</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Is called during the initialization of the <a href="/pyTEF/tef_core.html#TEF_object"><code>TEF_object</code></a> when a <code>filename</code> is provided.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="TEF_object.set_up" class="doc_header"><code>TEF_object.set_up</code><a href="https://github.com/florianboergel/pyTEF/tree/master/pyTEF/tef_core.py#L86" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>TEF_object.set_up</code>(<strong><code>time_name</code></strong>=<em><code>None</code></em>, <strong><code>longitude_name</code></strong>=<em><code>None</code></em>, <strong><code>latitude_name</code></strong>=<em><code>None</code></em>, <strong><code>depth_name</code></strong>=<em><code>None</code></em>)</p>
</blockquote>
<p>Sets up a xarray.dataset and transposes dimensions into needed format</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><a href="/pyTEF/tef_core.html#TEF_object.set_up"><code>TEF_object.set_up</code></a> tries to automatically find the corresponding dimensions. If no 4D array is provided, dummy dimensions will be created. However, sometimes the naming of the dimensions deviates from common dimension descriptions. If so, the explicit dimension names can be provided as well. The function automatically reorders the dimensions into <code>time, z, y, x</code>.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">xarray</span> <span class="k">as</span> <span class="nn">xr</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span> 

<span class="n">lat</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="o">-</span><span class="mi">180</span><span class="p">,</span> <span class="mi">180</span><span class="p">)</span>
<span class="n">lon</span> <span class="o">=</span> <span class="mi">37</span>
<span class="n">depth</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">200</span><span class="p">)</span>
<span class="n">time</span> <span class="o">=</span> <span class="mi">2</span>
<span class="n">dummy_var</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="n">lat</span><span class="o">.</span><span class="n">size</span><span class="p">,</span> <span class="n">depth</span><span class="o">.</span><span class="n">size</span><span class="p">))</span>

<span class="n">ds</span> <span class="o">=</span> <span class="n">xr</span><span class="o">.</span><span class="n">Dataset</span><span class="p">({</span><span class="s1">&#39;dummy&#39;</span><span class="p">:</span> <span class="p">([</span><span class="s2">&quot;lAtiTude&quot;</span><span class="p">,</span> <span class="s2">&quot;dePht&quot;</span><span class="p">],</span> <span class="n">dummy_var</span><span class="p">)},</span>
                <span class="n">coords</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;lAtiTude&#39;</span><span class="p">:</span> <span class="p">([</span><span class="s2">&quot;lAtiTude&quot;</span><span class="p">],</span> <span class="n">lat</span><span class="p">),</span>
                          <span class="s1">&#39;dePht&#39;</span><span class="p">:</span> <span class="p">([</span><span class="s2">&quot;dePht&quot;</span><span class="p">],</span> <span class="n">depth</span><span class="p">)})</span>

<span class="n">tef</span> <span class="o">=</span> <span class="n">TEF_object</span><span class="p">(</span><span class="n">ds</span><span class="o">=</span><span class="n">ds</span><span class="p">)</span>
<span class="n">tef</span><span class="o">.</span><span class="n">set_up</span><span class="p">(</span><span class="n">latitude_name</span><span class="o">=</span><span class="s2">&quot;lAtiTude&quot;</span><span class="p">,</span> <span class="n">depth_name</span><span class="o">=</span><span class="s2">&quot;dePht&quot;</span><span class="p">)</span>
<span class="n">tef</span><span class="o">.</span><span class="n">ds</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_text output_error">
<pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">Warning</span>                                   Traceback (most recent call last)
<span class="ansi-green-fg">/tmp/ipykernel_222172/1022547624.py</span> in <span class="ansi-cyan-fg">&lt;module&gt;</span>
<span class="ansi-green-intense-fg ansi-bold">     14</span> 
<span class="ansi-green-intense-fg ansi-bold">     15</span> tef <span class="ansi-blue-fg">=</span> TEF_object<span class="ansi-blue-fg">(</span>ds<span class="ansi-blue-fg">=</span>ds<span class="ansi-blue-fg">)</span>
<span class="ansi-green-fg">---&gt; 16</span><span class="ansi-red-fg"> </span>tef<span class="ansi-blue-fg">.</span>set_up<span class="ansi-blue-fg">(</span>latitude_name<span class="ansi-blue-fg">=</span><span class="ansi-blue-fg">&#34;lAtiTude&#34;</span><span class="ansi-blue-fg">,</span> depth_name<span class="ansi-blue-fg">=</span><span class="ansi-blue-fg">&#34;dePht&#34;</span><span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">     17</span> tef<span class="ansi-blue-fg">.</span>ds

<span class="ansi-green-fg">/tmp/ipykernel_222172/3042263914.py</span> in <span class="ansi-cyan-fg">set_up</span><span class="ansi-blue-fg">(self, time_name, longitude_name, latitude_name, depth_name)</span>
<span class="ansi-green-intense-fg ansi-bold">     82</span>         <span class="ansi-red-fg"># set dimensions</span>
<span class="ansi-green-intense-fg ansi-bold">     83</span>         <span class="ansi-green-fg">if</span> time_name <span class="ansi-green-fg">is</span> <span class="ansi-green-fg">None</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-fg">---&gt; 84</span><span class="ansi-red-fg">             </span>self<span class="ansi-blue-fg">.</span>_time_name <span class="ansi-blue-fg">=</span> self<span class="ansi-blue-fg">.</span>_get_name_time<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">     85</span>         <span class="ansi-green-fg">else</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-intense-fg ansi-bold">     86</span>             self<span class="ansi-blue-fg">.</span>_time_name <span class="ansi-blue-fg">=</span> time_name

<span class="ansi-green-fg">/tmp/ipykernel_222172/3042263914.py</span> in <span class="ansi-cyan-fg">_get_name_time</span><span class="ansi-blue-fg">(self, x)</span>
<span class="ansi-green-intense-fg ansi-bold">    152</span>                     <span class="ansi-green-fg">return</span> dim
<span class="ansi-green-intense-fg ansi-bold">    153</span>             <span class="ansi-red-fg"># no &#39;time&#39; dimension found</span>
<span class="ansi-green-fg">--&gt; 154</span><span class="ansi-red-fg">             raise Warning(
</span><span class="ansi-green-intense-fg ansi-bold">    155</span>                 <span class="ansi-blue-fg">&#34;\n &#39;time&#39; dimension (dtype=&#39;datetime64[ns]&#39;) not found.&#34;</span>
<span class="ansi-green-intense-fg ansi-bold">    156</span>             )

<span class="ansi-red-fg">Warning</span>: 
 &#39;time&#39; dimension (dtype=&#39;datetime64[ns]&#39;) not found.</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="TEF_object._get_name_time" class="doc_header"><code>TEF_object._get_name_time</code><a href="https://github.com/florianboergel/pyTEF/tree/master/pyTEF/tef_core.py#L138" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>TEF_object._get_name_time</code>(<strong><code>x</code></strong>=<em><code>None</code></em>)</p>
</blockquote>
<p>check for 'time' dimension and return name</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="TEF_object._get_name_depth" class="doc_header"><code>TEF_object._get_name_depth</code><a href="https://github.com/florianboergel/pyTEF/tree/master/pyTEF/tef_core.py#L191" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>TEF_object._get_name_depth</code>()</p>
</blockquote>
<p>check for 'depth' dimension and return name</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="TEF_object._get_name_longitude" class="doc_header"><code>TEF_object._get_name_longitude</code><a href="https://github.com/florianboergel/pyTEF/tree/master/pyTEF/tef_core.py#L166" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>TEF_object._get_name_longitude</code>()</p>
</blockquote>
<p>check for 'longitude' dimension and return name</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="TEF_object._get_name_latitude" class="doc_header"><code>TEF_object._get_name_latitude</code><a href="https://github.com/florianboergel/pyTEF/tree/master/pyTEF/tef_core.py#L179" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>TEF_object._get_name_latitude</code>()</p>
</blockquote>
<p>check for 'latitude' dimension and return name</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

</div>
 

